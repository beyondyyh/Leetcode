# Trie（前缀树/字典树）及其应用
Trie，又经常叫前缀树，字典树等等。它有很多变种，如后缀树，Radix Tree/Trie，PATRICIA tree，以及bitwise版本的crit-bit tree。当然很多名字的意义其实有交叉。

## 定义
在计算机科学中，trie，又称前缀树或字典树，是一种有序树，用于保存关联数组，其中的键通常是字符串。与二叉查找树不同，键不是直接保存在节点中，而是由节点在树中的位置决定。一个节点的所有子孙都有相同的前缀，也就是这个节点对应的字符串，而根节点对应空字符串。一般情况下，不是所有的节点都有对应的值，只有叶子节点和部分内部节点所对应的键才有相关的值。<br />
trie中的键通常是字符串，但也可以是其它的结构。trie的算法可以很容易地修改为处理其它结构的有序序列，比如一串数字或者形状的排列。比如，bitwise trie中的键是一串位元，可以用于表示整数或者内存地址

## 基本性质
1. 根节点不包含字符，除根节点意外每个节点只包含一个字符。<br />
2. 从根节点到某一个节点，路径上经过的字符连接起来，为该节点对应的字符串。<br />
3. 每个节点的所有子节点包含的字符串不相同。<br />

## 优点：
可以最大限度地减少无谓的字符串比较，故可以用于词频统计和大量字符串排序。
　　跟哈希表比较：
　　　　1. 最坏情况时间复杂度比hash表好
　　　　2. 没有冲突，除非一个key对应多个值（除key外的其他信息）
　　　　3. 自带排序功能（类似Radix Sort），中序遍历trie可以得到排序。
    
## 缺点：
1. 虽然不同单词共享前缀，但其实trie是一个以空间换时间的算法。其每一个字符都可能包含至多字符集大小数目的指针（不包含卫星数据）。
每个结点的子树的根节点的组织方式有几种。1>如果默认包含所有字符集，则查找速度快但浪费空间（特别是靠近树底部叶子）。2>如果用链接法(如左儿子右兄弟)，则节省空间但查找需顺序（部分）遍历链表。3>alphabet reduction: 减少字符宽度以减少字母集个数。,4>对字符集使用bitmap，再配合链接法。
2. 如果数据存储在外部存储器等较慢位置，Trie会较hash速度慢（hash访问O(1)次外存，Trie访问O(树高)）。
3. 长的浮点数等会让链变得很长。可用bitwise trie改进。

## bit-wise Trie
类似于普通的Trie，但是字符集为一个bit位，所以孩子也只有两个。
可用于地址分配，路由管理等。
虽然是按bit位存储和判断，但因为cache-local和可高度并行，所以性能很高。跟红黑树比，红黑树虽然纸面性能更高，但是因为cache不友好和串行运行多，瓶颈在存储访问延迟而不是CPU速度。

## 压缩Trie
压缩分支条件：
1. Trie基本不变
2. 只是查询
3. key跟结点的特定数据无关
4. 分支很稀疏
若允许添加和删除，就可能需要分裂和合并结点。此时可能需要对压缩率和更新（裂，并）频率进行折中。

## 外存Trie
某些变种如后缀树适合存储在外部，另外还有B-trie等。

*From: [Trie（前缀树/字典树）及其应用](https://www.cnblogs.com/justinh/p/7716421.html)*
